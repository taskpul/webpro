import{r as d,cr as l,dy as u,j as o,I as S,u as f,c as J,b as Q,dz as U,W as V,dA as m}from"./index-DdOSbXML.js";var x=e=>{const s=J();return d.useMemo(()=>{var a;const t=(a=s.state)==null?void 0:a.restore_params;return t?`${e}?${t.toString()}`:e},[s.state,e])},F=({form:e,blockSearchParams:s=!1,children:n,onClose:t})=>{const{t:a}=Q(),{formState:{isDirty:p}}=e,r=U(({currentLocation:c,nextLocation:g})=>{const{isSubmitSuccessful:y}=g.state||{};if(y)return t==null||t(!0),!1;const h=c.pathname!==g.pathname,W=c.search!==g.search;if(s){const G=p&&(h||W);return h&&(t==null||t(y)),G}const q=p&&h;return h&&(t==null||t(y)),q}),v=()=>{var c;(c=r==null?void 0:r.reset)==null||c.call(r)},i=()=>{var c;(c=r==null?void 0:r.proceed)==null||c.call(r),t==null||t(!1)};return o.jsxs(V,{...e,children:[n,o.jsx(m,{open:r.state==="blocked",variant:"confirmation",children:o.jsxs(m.Content,{children:[o.jsxs(m.Header,{children:[o.jsx(m.Title,{children:a("general.unsavedChangesTitle")}),o.jsx(m.Description,{children:a("general.unsavedChangesDescription")})]}),o.jsxs(m.Footer,{children:[o.jsx(m.Cancel,{onClick:v,type:"button",children:a("actions.cancel")}),o.jsx(m.Action,{onClick:i,type:"button",children:a("actions.continue")})]})]})})]})},j=d.createContext(null),D=({prev:e,children:s})=>{const n=f(),[t,a]=d.useState(!0),p=d.useCallback(v=>{n(v||e,{replace:!0,state:{isSubmitSuccessful:!0}})},[n,e]),r=d.useMemo(()=>({handleSuccess:p,setCloseOnEscape:a,__internal:{closeOnEscape:t}}),[p,a,t]);return o.jsx(j.Provider,{value:r,children:s})},M=d.createContext(null),C=({children:e,onOpenChange:s})=>{const[n,t]=d.useState({}),a=i=>n[i]||!1,p=(i,c)=>{t(g=>({...g,[i]:c})),s(c)},r=i=>{t(c=>({...c,[i]:!1}))},v=i=>{t(c=>{const g={...c};return delete g[i],g})};return o.jsx(M.Provider,{value:{getIsOpen:a,setIsOpen:p,register:r,unregister:v},children:e})},k=()=>{const e=d.useContext(M);if(!e)throw new Error("useStackedModal must be used within a StackedModalProvider");return e},X=({prev:e="..",children:s})=>{const n=f(),[t,a]=d.useState(!1),[p,r]=d.useState(!1),v=x(e);d.useEffect(()=>(a(!0),()=>{a(!1),r(!1)}),[]);const i=c=>{if(!c){document.body.style.pointerEvents="auto",n(v,{replace:!0});return}a(c)};return o.jsx(l,{open:t,onOpenChange:i,children:o.jsx(D,{prev:v,children:o.jsx(C,{onOpenChange:r,children:o.jsx(l.Content,{"aria-describedby":void 0,className:S({"!bg-ui-bg-disabled !inset-y-5 !right-5":p}),children:s})})})})},Y=l.Header,Z=l.Title,L=l.Description,ee=l.Body,te=l.Footer,ae=l.Close,re=F,Se=Object.assign(X,{Header:Y,Title:Z,Body:ee,Description:L,Footer:te,Close:ae,Form:re}),se=()=>{const e=d.useContext(j);if(!e)throw new Error("useRouteModal must be used within a RouteModalProvider");return e},oe=({prev:e="..",children:s})=>{const n=f(),[t,a]=d.useState(!1),[p,r]=d.useState(!1),v=x(e);d.useEffect(()=>(a(!0),()=>{a(!1),r(!1)}),[]);const i=c=>{if(!c){document.body.style.pointerEvents="auto",n(v,{replace:!0});return}a(c)};return o.jsx(u,{open:t,onOpenChange:i,children:o.jsx(D,{prev:v,children:o.jsx(C,{onOpenChange:r,children:o.jsx(ne,{stackedModalOpen:p,children:s})})})})},ne=({stackedModalOpen:e,children:s})=>{const{__internal:n}=se(),t=!n.closeOnEscape;return o.jsx(u.Content,{onEscapeKeyDown:t?a=>{a.preventDefault()}:void 0,className:S({"!bg-ui-bg-disabled !inset-x-5 !inset-y-3":e}),children:s})},ce=u.Header,de=u.Title,ie=u.Description,le=u.Footer,ue=u.Body,pe=u.Close,ve=F,ye=Object.assign(oe,{Header:ce,Title:de,Body:ue,Description:ie,Footer:le,Close:pe,Form:ve}),ge=({id:e,children:s})=>{const{register:n,unregister:t,getIsOpen:a,setIsOpen:p}=k();return d.useEffect(()=>(n(e),()=>t(e)),[]),o.jsx(l,{open:a(e),onOpenChange:r=>p(e,r),children:s})},O=l.Close;O.displayName="StackedDrawer.Close";var T=l.Header;T.displayName="StackedDrawer.Header";var N=l.Body;N.displayName="StackedDrawer.Body";var w=l.Trigger;w.displayName="StackedDrawer.Trigger";var b=l.Footer;b.displayName="StackedDrawer.Footer";var B=l.Title;B.displayName="StackedDrawer.Title";var R=l.Description;R.displayName="StackedDrawer.Description";var E=d.forwardRef(({className:e,...s},n)=>o.jsx(l.Content,{ref:n,className:S(e),overlayProps:{className:"bg-transparent"},...s}));E.displayName="StackedDrawer.Content";var fe=Object.assign(ge,{Close:O,Header:T,Body:N,Content:E,Trigger:w,Footer:b,Description:R,Title:B}),me=({id:e,onOpenChangeCallback:s,children:n})=>{const{register:t,unregister:a,getIsOpen:p,setIsOpen:r}=k();d.useEffect(()=>(t(e),()=>a(e)),[]);const v=i=>{r(e,i),s==null||s(i)};return o.jsx(u,{open:p(e),onOpenChange:v,children:n})},H=u.Close;H.displayName="StackedFocusModal.Close";var P=u.Header;P.displayName="StackedFocusModal.Header";var I=u.Body;I.displayName="StackedFocusModal.Body";var _=u.Trigger;_.displayName="StackedFocusModal.Trigger";var A=u.Footer;A.displayName="StackedFocusModal.Footer";var $=u.Title;$.displayName="StackedFocusModal.Title";var z=u.Description;z.displayName="StackedFocusModal.Description";var K=d.forwardRef(({className:e,...s},n)=>o.jsx(u.Content,{ref:n,className:S("!top-6",e),overlayProps:{className:"bg-transparent"},...s}));K.displayName="StackedFocusModal.Content";var xe=Object.assign(me,{Close:H,Header:P,Body:I,Content:K,Trigger:_,Footer:A,Description:z,Title:$});export{ye as R,xe as S,k as a,Se as b,fe as c,se as u};
