import{T as q}from"./chunk-ENNEJRBR--ihHhQFK.js";import{u as Y,a as G,b as U}from"./chunk-GLVCH422-CPKvygCi.js";import{c as J}from"./chunk-OKMF4YI7-C4sggAKD.js";import{g as K}from"./chunk-UC26CCHZ-DbXuoyCH.js";import{a as j}from"./chunk-MSDRGCRR-BdWcKAwE.js";import{u as V,a as W}from"./chunk-PCFUZKDS-DcOLI6xi.js";import{D as $}from"./chunk-SJ3E4T6B-CaDQoSV2.js";import{u as B,_ as M}from"./chunk-7VJK6HNE-BEBSsUUt.js";import{b as ee}from"./chunk-3C6WQ7NH-CFD-Eqk8.js";import{u as te}from"./chunk-Y4YXZY7R-CLVZk5YF.js";import{S as ae,c as se}from"./chunk-4TC5YS65-CQLRrj-3.js";import{ap as Z,ar as Q,ex as re,aB as ne,b as z,r as f,j as s,B as X,f as oe,k as H,a3 as T,l as le,dQ as ie,an as ce,aa as de,Z as ue,J as pe,a1 as fe,i as N}from"./index-DdOSbXML.js";import{u as me}from"./chunk-GRT22PE5-Bh_4tQNx.js";var y=N(),ge=()=>{const{t:a}=z();return f.useMemo(()=>[y.accessor("name",{header:()=>a("fields.name"),cell:({getValue:e})=>s.jsx(j,{text:e()})}),y.accessor("shipping_profile",{header:()=>a("fields.shippingProfile"),cell:({row:e})=>{var t;return s.jsx(j,{text:((t=e.original.shipping_profile)==null?void 0:t.name)||"N/A"})}}),y.display({id:"location",header:()=>a("fields.location"),cell:({row:e})=>{const t=K(e.original);return s.jsx(j,{text:t})}}),y.display({id:"service_zone",header:()=>a("fields.serviceZone"),cell:({row:e})=>{var r;const t=(r=e.original.service_zone)==null?void 0:r.name;return s.jsx(j,{text:t||"N/A"})}}),y.display({id:"enabled_in_store",header:()=>a("fields.enabledInStore"),cell:({row:e})=>{var n;let t="N/A";const r=(n=e.original.rules)==null?void 0:n.find(i=>i.attribute==="enabled_in_store");return r&&(t=r.value==="true"?"Yes":"No"),s.jsx(j,{text:t})}}),y.display({id:"is_return",header:()=>a("fields.isReturn"),cell:({row:e})=>{var n;let t="N/A";const r=(n=e.original.rules)==null?void 0:n.find(i=>i.attribute==="is_return");return r&&(t=r.value==="true"?"Yes":"No"),s.jsx(j,{text:t})}}),y.accessor("created_at",{header:()=>a("fields.createdAt"),cell:({getValue:e})=>s.jsx($,{date:e()})})],[a])};function he(a){return a.reduce((e,t)=>(e[t.value]=!0,e),{})}var Le=({referenceType:a,type:e,setState:t,state:r})=>{const{t:n}=z(),i=e==="focus"?ae:se,[m,b]=f.useState(r),l=()=>{t(m)};return s.jsxs("div",{className:"flex size-full flex-col overflow-hidden",children:[s.jsx(i.Body,{className:"min-h-0 p-0",children:s.jsx(Se,{referenceType:a,initialRowState:he(r),intermediate:m,setIntermediate:b})}),s.jsxs(i.Footer,{children:[s.jsx(i.Close,{asChild:!0,children:s.jsx(X,{variant:"secondary",size:"small",type:"button",children:n("actions.cancel")})}),s.jsx(X,{type:"button",size:"small",onClick:l,children:n("actions.save")})]})]})},Se=({referenceType:a,...e})=>{switch(a){case"product":return s.jsx(be,{...e});case"product_type":return s.jsx(ve,{...e});case"shipping_option":return s.jsx(Te,{...e});default:return null}},p=50,E="p",be=({initialRowState:a,intermediate:e,setIntermediate:t})=>{const{t:r}=z(),[n,i]=f.useState(a);L();const{searchParams:m,raw:b}=V({pageSize:p,prefix:E}),{products:l,count:g,isLoading:k,isError:w,error:C}=oe(m,{placeholderData:H}),I=c=>{const d=typeof c=="function"?c(n):c,h=Object.keys(n),S=Object.keys(d),P=S.filter(o=>!h.includes(o)),_=h.filter(o=>!S.includes(o)),O=(l==null?void 0:l.filter(o=>P.includes(o.id)).map(o=>({value:o.id,label:o.title})))||[],A=e.filter(o=>!_.includes(o.value));t([...A,...O]),i(d)},R=te(),x=ye(),{table:v}=B({data:l||[],columns:x,count:g,enablePagination:!0,enableRowSelection:!0,getRowId:c=>c.id,rowSelection:{state:n,updater:I},pageSize:p,prefix:E});if(w)throw C;return s.jsx(M,{table:v,columns:x,pageSize:p,count:g,isLoading:k,filters:R,orderBy:[{key:"title",label:r("fields.title")},{key:"created_at",label:r("fields.createdAt")},{key:"updated_at",label:r("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:E,queryObject:b})},xe=N(),ye=()=>{const a=W();return f.useMemo(()=>[xe.display({id:"select",header:({table:e})=>s.jsx(T,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t)}),cell:({row:e})=>s.jsx(T,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),onClick:t=>{t.stopPropagation()}})}),...a],[a])},D="pt",ve=({initialRowState:a,intermediate:e,setIntermediate:t})=>{const{t:r}=z(),[n,i]=f.useState(a);L();const{searchParams:m,raw:b}=Y({pageSize:p,prefix:D}),{product_types:l,count:g,isLoading:k,isError:w,error:C}=le(m,{placeholderData:H}),I=c=>{const d=typeof c=="function"?c(n):c,h=Object.keys(n),S=Object.keys(d),P=S.filter(o=>!h.includes(o)),_=h.filter(o=>!S.includes(o)),O=(l==null?void 0:l.filter(o=>P.includes(o.id)).map(o=>({value:o.id,label:o.value})))||[],A=e.filter(o=>!_.includes(o.value));t([...A,...O]),i(d)},R=G(),x=je(),{table:v}=B({data:l||[],columns:x,count:g,enablePagination:!0,enableRowSelection:!0,getRowId:c=>c.id,rowSelection:{state:n,updater:I},pageSize:p,prefix:D});if(w)throw C;return s.jsx(M,{table:v,columns:x,pageSize:p,count:g,isLoading:k,filters:R,orderBy:[{key:"value",label:r("fields.value")},{key:"created_at",label:r("fields.createdAt")},{key:"updated_at",label:r("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:D,queryObject:b})},Pe=N(),je=()=>{const a=U();return f.useMemo(()=>[Pe.display({id:"select",header:({table:e})=>s.jsx(T,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t)}),cell:({row:e})=>s.jsx(T,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),onClick:t=>{t.stopPropagation()}})}),...a],[a])},F="so",Te=({initialRowState:a,intermediate:e,setIntermediate:t})=>{const{t:r}=z(),[n,i]=f.useState(a);L();const{searchParams:m,raw:b}=J({pageSize:p,prefix:F}),{shipping_options:l,count:g,isLoading:k,isError:w,error:C}=me({...m,fields:"+service_zone.fulfillment_set.location.*"},{placeholderData:H}),I=d=>{const h=typeof d=="function"?d(n):d,S=Object.keys(n),P=Object.keys(h),_=P.filter(u=>!S.includes(u)),O=S.filter(u=>!P.includes(u)),A=(l==null?void 0:l.filter(u=>_.includes(u.id)).map(u=>({value:u.id,label:u.name})))||[],o=e.filter(u=>!O.includes(u.value));t([...o,...A]),i(h)},{stock_locations:R}=ie({limit:1e3}),x=ee(R||[]),v=we(),{table:c}=B({data:l||[],columns:v,count:g,enablePagination:!0,enableRowSelection:!0,getRowId:d=>d.id,rowSelection:{state:n,updater:I},pageSize:p,prefix:F});if(w)throw C;return s.jsx(M,{table:c,columns:v,pageSize:p,count:g,isLoading:k,filters:x,orderBy:[{key:"name",label:r("fields.name")},{key:"created_at",label:r("fields.createdAt")},{key:"updated_at",label:r("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:F,queryObject:b})},ke=N(),we=()=>{const a=ge();return f.useMemo(()=>[ke.display({id:"select",header:({table:e})=>s.jsx(T,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t)}),cell:({row:e})=>s.jsx(T,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),onClick:t=>{t.stopPropagation()}})}),...a],[a])},L=()=>{const[a,e]=ce();f.useEffect(()=>()=>{e({})},[])},Qe=({index:a,label:e,onRemove:t,value:r})=>{const{product:n}=de(r,{fields:"id,title"},{enabled:!e});return s.jsxs("div",{className:"bg-ui-bg-field-component shadow-borders-base flex items-center justify-between gap-2 rounded-md px-2 py-0.5",children:[s.jsx(ue,{size:"small",leading:"compact",children:e||(n==null?void 0:n.title)}),s.jsx(pe,{size:"small",variant:"transparent",type:"button",onClick:()=>t(a),children:s.jsx(fe,{})})]})},Ce=Z({value:Q(),label:Q()});Z({reference_type:re(q),references:ne(Ce)});var Xe=a=>a.references.map(e=>({reference:a.reference_type,reference_id:e.value}));export{Ce as T,Le as a,Qe as b,Xe as c};
